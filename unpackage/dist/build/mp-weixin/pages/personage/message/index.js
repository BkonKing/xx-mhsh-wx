(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/personage/message/index"],{3577:function(e,t,r){"use strict";var n=r("f036"),s=r.n(n);s.a},"488e":function(e,t,r){"use strict";r.r(t);var n=r("df15"),s=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=s.a},"973b":function(e,t,r){"use strict";r.r(t);var n=r("f5b6"),s=r("488e");for(var i in s)"default"!==i&&function(e){r.d(t,e,(function(){return s[e]}))}(i);r("3577");var u,a=r("f0c5"),o=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,"4012cf5c",null,!1,n["a"],u);t["default"]=o.exports},c888:function(e,t,r){"use strict";(function(e){r("f38a");n(r("66fd"));var t=n(r("973b"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=r,e(t.default)}).call(this,r("543d")["createPage"])},df15:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("26cb"),s=u(r("9b2e")),i=r("c92a");function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(){r.e("pages/personage/message/components/MessageItem").then(function(){return resolve(r("7dd3"))}.bind(null,r)).catch(r.oe)},p=function(){r.e("pages/personage/message/components/InteractionItem").then(function(){return resolve(r("0431"))}.bind(null,r)).catch(r.oe)},h={name:"messageIndex",mixins:[s.default],components:{MessageItem:d,InteractionItem:p},data:function(){return{isShowTask:!1,badgeList:[],current:0}},computed:o(o({},(0,n.mapGetters)(["userInfo"])),{},{messageType:function(){var e=this.current||"1",t={1:"work",2:"transaction",3:"interaction",4:"butler",5:"activity",6:"system",7:"task"};return t[e]}}),onLoad:function(){var e=this;this.current=1==this.userInfo.swrole?"1":"2",this.getListData(1,7).then((function(t){var r=t.data;e.isShowTask=r&&r.length}))},onShow:function(){this.getCountMessage()},methods:{onTabChange:function(e){this.current=e.detail.name,this.refreshLoad()},getListData:function(){return(0,i.getMessageList)({remind_type:this.current,pages:this.pageNum})},getCountMessage:function(){var e=this;(0,i.getCountMessage)().then((function(t){e.badgeList=t.data}))},messageRead:function(e,t){var r=this;(0,i.messageRead)({id:e.id}).then((function(n){r.$set(r.listData[t],"is_read","0"),e.is_read="1"}))},handleOperate:function(e){var t=this.listData[e],r=6==t.sub_type||7==t.sub_type;0==t.is_read&&r&&this.messageRead(t,e);var n={1:"onWork",2:"toTransaction",3:"toInteraction",4:"toButler",5:"onActivity",6:"onSystem",7:"handleTaskClick"},s=n[this.current];this[s](t)},toTransaction:function(e){var t=e.sub_type;switch(t){case"1":this.$router.push({path:"/order/refund-detail",query:{type:e.refund_type,id:e.source_id}});break;case"2":this.$router.push({path:"1"==e.order_type?"/order/detail":"/order/special-detail",query:{id:e.source_id}});break;case"3":this.$router.push({path:"/store/goods-detail",query:{id:e.source_id}});break;case"4":this.$router.push({path:"/order/barter-detail",query:{id:e.source_id}});break;case"5":this.$router.push({path:"/order/refund-detail",query:{type:e.refund_type,id:e.source_id}});break;case"20":this.$router.push({path:"livePayRecord",query:{houseId:e.source_id}});break;case"21":this.$router.push({path:"movieTicket",query:{id:e.source_id}});break}[26,29,30,31].includes(+t)&&this.$router.push({path:"shopWithdrawDetail",query:{id:e.source_id,idType:e.id_type}}),6!=t&&7!=t||this.$router.push("/pages/credit/creditDetail?id=".concat(e.source_id))},toInteraction:function(e){this.$router.push({path:"/pages/neighbours/details",query:{articleType:e.article_type,id:e.source_id}})},onActivity:function(e){this.$router.push({path:"/pages/neighbours/details",query:{articleType:"2",id:e.source_id}})},toButler:function(e){switch(e.sub_type){case"13":this.$router.push({path:"/pages/butler/notice/details",query:{id:e.source_id}});break;case"14":this.$router.push({path:"/pages/butler/freeserver/list"});break;case"15":this.$router.push({path:"/pages/butler/compraise/details",query:{id:e.source_id}});break;case"16":this.$router.push({path:"/pages/butler/repairs/details",query:{id:e.source_id}});break;case"19":this.$router.push({path:"livePayIndex",query:{id:e.source_id}});break;case"22":this.$router.push({path:"livemainPay",query:{genreType:e.genre_type,projectId:e.project_id,houseId:e.expenses_house_id}});break}},onSystem:function(e){8==e.sub_type&&this.$router.push({path:"sysMsgInfo",query:{id:e.source_id}}),9==e.sub_type&&this.$router.push({path:"/pages/personage/feedback/details",query:{id:e.source_id}}),[27,28].includes(+e.sub_type)&&this.$router.push({path:"shopInformation",query:{shopId:e.source_id,type:1}})},onWork:function(e){this.$router.push({path:"/pages/personage/transaction/details",query:{id:e.source_id}})},handleTaskClick:function(e){var t={23:"scheduleReceiver",24:"PersonageTaskDetails",25:"operateQuiz"};this.$router.push({path:t[e.sub_type],query:{taskId:e.source_id}})}}};t.default=h},f036:function(e,t,r){},f5b6:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var n={uniNavBar:function(){return r.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(r.bind(null,"35c2"))},uniLoadMore:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(r.bind(null,"971c"))}},s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){return e.$router.go(-1)})},i=[]}},[["c888","common/runtime","common/vendor"]]]);